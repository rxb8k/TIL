# 💚 제3과목 데이터베이스


## 📌 키워드 정리

### SQL 종류

   구분|명령어|
   ---|---|
   DQL 질의어|SELECT|
   DML 조작어|INSERT, UPDATE, DELETE|
   DDL 정의어|CREATE, ALTER, DROP|
   DCL 제어어|**GRANT, REVOKE, COMMIT, ROLLBACK**|


### 정규화

   유형|특징|
   ---|---|
   1NF|다치 애트리뷰트 제거 -> 모든 속성이 **원자값**|
   2NF|부분 함수 종속 제거 -> 모든 속성이 기본 키에 대해 **완전 함수적 종속 관계**|
   3NF|이행적 함수 종속 제거|
   BCNF|후보키가 아닌 결정자 제거 -> **모든 결정자가 후보키**|
   4NF|다치 종속 제거 -> 모든 애트리뷰트 X에 대해 A->X이고 A가 후보키|
   5NF|조인 종속성 이용 -> 조인 종속 제거|



### 데이터 무결성(Integrity) 제약 조건
1. 도메인 무결성
2. 속성 무결성
3. 키 무결성
4. **개체(엔티티) 무결성** 기본키 속성은 NULL이나 중복 불가
5. **참조 무결성** 참조할 수 없는 외래키 값을 가질 수 없다.
6. 사용자 정의 무결성 


### 관계 대수
1. 원하는 릴레이션을 정의하는 방법(연산의 종류와 순서)을 제공하는 **절차적 언어** (비절차적 언어 => 관계해석)
2. 순수 관계 연산

  기호|종류|의미|
   ---|---|---|
   σ|Select||
   π|Project|속성 추출|   
   ⋈|Join||   
   ÷|Division|R, S에서 S가 가진 속성 모두 제외|

3. 일반 집합 연산 : 합집합 UNION, 교집합 INTERSECTION, 차집합 DIFFERENCE, 교차곱 CARTESIAN PRODUCT

### 키(key)의 종류
+ 후보키 : 기본키로 사용할 수 있는 속성들
+ 기본키
+ 대체키 : 기본키를 제외한 후보키
+ 슈퍼키 : 속성들의 집합으로 구성된 키
+ 외래키

      유일성 : 기본키, 후보키, 슈퍼키
      최소성 : 기본키, 후보키


### 트랜잭션
1. 트랜잭션의 특징

   **A 원자성 (Commit/Rollback) : 전체 성공or전체 실패로 무결성 보장**

   C 일관성 : 트랜잭션 성공이 완료되면 언제나 일관성 있는 데이터베이스 상태로 변환

   I 고립성 : 어느 하나의 트랜잭션 실행 중 다른 트랜잭션의 연산이 끼어들 수 없음

   D 영속성 : 성공적으로 완료(Commit)된 트랜잭션 결과는 시스템이 고장나도 영구적으로 반영되어야 함

2. 트랜잭션의 상태
+ **부분완료(Partically Committed)** : 마지막 명령문이 실행된 후, Commit 직전 상태
   + 1) 완료(Commit)
   + 2) **실패(Failed)** -> **철회(Aborted)** (ROLLBACK)

3. 트랜잭션 동시성 제어 -> 로킹


### 병행 제어 기법
+ 로킹(Locking) ⭐
   1. 정의: 하나의 트랜잭션에서 사용되는 데이터를 다른 트랜잭션에서 접근하지 못하도록 제한하는 병행 제어 기법 *동시성 제어를 위한 직렬화 기법*
   2. **로킹 단위↑ 로크 수↓ 병행 제어 관리 용이, 로킹 오버헤드 감소, 병행성 감소, 공유도 감소**
   3. 트랜잭션 갱신 시 잠금(Lock)->실행(Execute)->해제(Unlock)의 규칙으로 실행
+ 검증 기법(Validation) : 트랜잭션 처리 시 먼저 메모리상에서 복사본에 대한 연산을 수행하고 검증 완료 시 DBMS에 반영하는 기법
+ 타임 스탬프 기법 (Timestamp Ordering) : 트랜잭션이 시스템에 들어오는 순서대로 타임스탬프 

### 트리거 Trigger
+ 이벤트가 발생할 때마다 자동적으로 갱신 - INSERT, UPDATE, DELETE
+ 행 트리거(Row-Level Trigger) : FOR EACH ROW로 정의
+ 기타 - 문장 트리거

### 뷰 View
+ 논리적 독립성 제공 / 자체 인덱스 불가, 정의 변경 불가, 데이터 변경 제약 존재
+ DROP VIEW [viewName] { RESTRICT | CASCADE } 로 삭제
+ SELECT * FROM [viewName]; 과 같이 

### 스키마
+ 스키마란? 데이터베이스의 구조와 제약조건에 관한 전반적인 명세를 기술한 것
+ 외부 스키마 : 데이터베이스의 논리적 구조를 정의한 것
+ 개념 스키마 : 데이터베이스의 전체적인 논리적 구조. 하나만 존재한다
+ 내부 스키마 : 물리적 저장장치의 입장에서 본 데이터베이스 구조


### 데이터베이스 설계 단계
1. 요구사항 분석
2. 개념적 설계 : 현실 세계를 추상적 개념으로 표현하는 과정 -> ER 다이어그램
+ 데이터 베이스 설계 시 고려사항 : 무결성, 일관성, 회복, 보안, 효율성, 데이터베이스 확장
3. 논리적 설계 : 스키마 설계
4. 물리적 설계 : 저장 레코드 양식 설계, 레코드 집중의 분석 및 설계, 접근 경로 설계
5. 데이터베이스 구축
6. 데이터 이행



### 분산 데이터베이스
1. 분산 데이터베이스 : 하나의 DBMS가 여러 CPU에 연결된 저장장치를 제어하는 형태, 논리적으로는 같은 시스템이나 네트워크를 통해 물리적으로 분산되어 있음 
 
   -> 데이터베이스를 여러 지역 노드로 위치시켜 사용성, 성능 극대화
 
2. 분산 데이터베이스의 투명성
+ 위치(Location) 투명성 : 사용하려는 데이터의 저장 장소를 명시할 필요 없이, 위치 정보가 시스템 카탈로그에 유지되는 성질
+ 지역사상
+ 중복(Replication) 투명성 : DB 객체가 여러 사이트에 중복되어 있는지 알 필요가 없는 성질
+ 장애(Failure) 투명성 : 트랜잭션 원자성 
+ 분할 투명성 (단편화) : 하나의 논리적 릴레이션이 여러 단편으로 분할되어  각 단편의 사본이 여러 사이트에 저장되는 성질 
+ 병행 투명성 : 다수 트랜잭션 동시 수행 시 결과의 일관성이 유지되는 성질

### 데이터 모델에 표시해야 할 요소
데이터 구조, 연산, 제약조건


### 데이터베이스 회복
+ 로그 활용: 지연 갱신, 즉각 갱신, 검사점 기법
+ 페이지 활용: 그림자 페이지
+ 미디어 회복

### 이상현상(Anomaly)
정규화 안 해서 불필요한 데이터 중복

삽입 이상, 삭제 이상, 갱신 이상

### 릴레이션의 요소와 특징
+ 차수 = 속성들의 수, 카디널리티 = 튜플(=레코드)들의 수 => 카티션 프로덕트 결과 차수는 +, 카디널리티는 ×
+ **도메인(domain)** : 하나의 속성이 가질 수 있는 같은 타입의 모든 값의 집합, 각 속성의 도메인은 원자값
+ 속성은 더 이상 쪼갤 수 없는 원자값만을 저장

### 속성(Attribute)
+ 단순 속성 : 더 이상 다른 속성으로 나눌 수 없는 속성
+ 복합 속성 : 두 개 이상의 속성으로 이루어진 속성
+ 다중 값 속성 : 각 개체마다 여러 개의 값을 가질 수 있는 속성 (=다치 애트리뷰트), E-R 다이어그램에서 이중선으로 표현
+ 유도된 속성 : 다른 속성 값으롭퉈 획득한 속성, 점선 타원으로 

### SQL 문법
BETWEEN ~ AND ~

UPDATE ~ SET ~

GRANT UPDATE ON [func] TO [user] 권한 부여, **WITH GRANT OPTION**으로 권한을 다른 사용자에게 허가 가능

REVOKE [func] FROM [user] 권한 해제

집계함수의 count()는 NULL 값을 포함하고, 이외의 집계함수들 avg, sum, max 등은 NULL 제거한 뒤 계산

(SELECT ~) INTERSECT (SELECT ~) 교집합

SELECT /* USE_HASH(A, B) */ FROM A, B WHERE [조인 조건] 해쉬 조인

### 클러스터
+ 어떤 정해진 컬럼 값을 기준으로, 동일한 성격의 데이터(동일한 값을 가진)를 동일한 데이터 블록에 저장하는 물리적 저장 방법
+ 조인이나 자주 사용되는 테이블의 데이터를 디스크의 같은 위치에 놓음
-> 디스크로부터 데이터를 읽어오는 시간을 줄이기 위함
+ 데이터 분포도가 넓을수록 유리

### 시스템 카탈로그
메타데이터를 포함하는 시스템 테이블, 사용자가 변경할 수 없음

### CRUD 매트릭스
수행할 업무와 프로세스 수행에 사용된 개체간의 상관관계를 분석하기 위해 2차원 구조의 행렬 구조로 표현 (상관 분석표)

### 병렬 데이터베이스 환경
파티션 (Partition)
+ 수평 분할 기법
   + 라운드-로빈 : 파티셔닝 대상 튜플이 일정한 분포로 분할하는 기법
   + 범위 분할 : 연속적인 숫자, 날짜 등 분할 키를 기준으로 범위 내의 데이터를 분할하는 기법
   + 해시 분할 : 해시함수 값을 파티션에 포함하여 균등하게 데이터를 분할하는 기법
   + 리스트 분할 : 데이터에 대해 명시적인 값을 기준으로 분할하는 기법


### 절차형 SQL
+ 기본 구성 요소 : DECLARE, BEGIN, END

### DB 신기술
+ 브로드 데이터 : 채널에서 소비자와 상호 작용을 통해 생성된 데이터, 마케팅에 효율적
+ 디지털 아카이빙 : 장기 보존 작업
+ 하둡(Hadoop) : 오픈 소스 기반 분산 컴퓨팅 플랫폼
+ 맵 리듀스(MapReduce) :대용량 데이터 분산 처리
+ 타조(Tajo) : Apache Hadoop 기반 데이터 웨어하우스 프로젝트
+ 데이터 다이어트
+ 데이터 마이닝 : 대량의 데이터를 분석하여 데이터에 내재된 변수 사이의 상호 관계를 규명하여 일정한 패턴 찾아냄
+ OLAP(on-line analytical processing) 연산: 다차원 정보에 접근하여 정보를 시각적으로 분석하는 의사결정 지원 도구. Pivot, Slicingu&Dicing, Drill-up&Down, Drill-Through, 보고서/차트 생성